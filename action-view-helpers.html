<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#">
  <head>
    <meta charset="utf-8">
<meta content="Ruby on Rails, Ruby, Rails, Rails 3, Rails 4, Rails 5, Rails 6, Rails 6.0, Rails 6.1, Rails 7.0, Rails 7.1 руководство, начинающим, самоучитель, manual, мануал, справочник, учебник, примеры, Руби, рельсы" name="keywords"/>
<meta content="Ruby on Rails руководства, учебники, статьи на русском языке" name="description"/>
<meta content="product" property="twitter:card"/>
<meta content="@rusrails" property="twitter:site"/>
<meta content="Rusrails: Хелперы Action View" property="twitter:title"/>
<meta content="Ruby on Rails руководства, учебники, статьи на русском языке" property="twitter:description"/>
<meta content="@rusrails" property="twitter:creator"/>
<meta content="http://rusrails.ru/assets/rusrails.png" property="twitter:image"/>
<meta content="website" property="og:type"/>
<meta content="Rusrails: Хелперы Action View" property="og:title"/>
<meta content="Ruby on Rails руководства, учебники, статьи на русском языке" property="og:description"/>
<meta content="http://localhost:3000/action-view-helpers" property="og:url"/>
<meta content="http://rusrails.ru/assets/rusrails.png" property="og:image"/>
    <title>
      Rusrails: Хелперы Action View
    </title>
    <link rel="stylesheet" href="/assets/application-f9dfa6ce7fa871006d478e422639671663284ddaa3126cf81ddfe371ac3533c4.css" />
  </head>
  <body>
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="brand" href="/"></a>
          <ul class="nav pull-right top-menu">
            <li>
              <a href="/">Главная</a>
            </li>
            <li class="dropdown">
              <a class="index-popover" href="#">
                Содержание
                <b class="caret"></b>
</a>              <div class="index-popover-content hide">
                  <ul><li><p><strong>С чего начать?</strong></p><ul><li><a href="/getting-started">Rails для начинающих</a>
</li></ul></li><li><p><strong>Модели</strong></p><ul><li><a href="/active-record-basics">Основы Active Record</a>
</li><li><a href="/active-record-migrations">Миграции Active Record</a>
</li><li><a href="/active-record-validations">Валидации Active Record</a>
</li><li><a href="/active-record-callbacks">Колбэки Active Record</a>
</li><li><a href="/active-record-associations">Связи (ассоциации) Active Record</a>
</li><li><a href="/active-record-querying">Интерфейс запросов Active Record</a>
</li><li><a href="/active-model-basics">Основы Active Model</a>
</li></ul></li><li><p><strong>Вью</strong></p><ul><li><a href="/action-view-overview">Обзор Action View</a>
</li><li><a href="/layouts-and-rendering">Макеты и рендеринг в Rails</a>
</li><li><a href="/action-view-helpers">Хелперы Action View</a>
</li><li><a href="/form-helpers">Хелперы форм в Action View</a>
</li></ul></li><li><p><strong>Контроллеры</strong></p><ul><li><a href="/action-controller-overview">Обзор Action Controller</a>
</li><li><a href="/routing">Роутинг в Rails</a>
</li></ul></li><li><p><strong>Другие компоненты</strong></p><ul><li><a href="/active-support-core-extensions">Расширения ядра Active Support</a>
</li><li><a href="/action-mailer-basics">Основы Action Mailer</a>
</li><li><a href="/action-mailbox-basics">Основы Action Mailbox</a>
</li><li><a href="/action-text-overview">Обзор Action Text</a>
</li><li><a href="/active_job_basics">Основы Active Job</a>
</li><li><a href="/active_storage_overview">Обзор Active Storage</a>
</li><li><a href="/action-cable-overview">Обзор Action Cable</a>
</li></ul></li><li><p><strong>Копаем глубже</strong></p><ul><li><a href="/i18n">API интернационализации Rails (I18n)</a>
</li><li><a href="/testing">Тестирование приложений на Rails</a>
</li><li><a href="/security">Безопасность приложений на Rails</a>
</li><li><a href="/error-reporting">Отчет об ошибках в приложениях Rails</a>
</li></ul></li></ul><p>next_column</p><ul><li><p><strong>Копаем глубже</strong></p><ul><li><a href="/debugging-rails-applications">Отладка приложений на Rails</a>
</li><li><a href="/configuring">Конфигурирование приложений на Rails</a>
</li><li><a href="/command-line">Командная строка Rails</a>
</li><li><a href="/asset-pipeline">Asset Pipeline</a>
</li><li><a href="/working-with-javascript-in-rails">Работа с JavaScript в Rails</a>
</li><li><a href="/initialization">Процесс инициализации в Rails</a>
</li><li><a href="/autoloading-and-reloading-constants">Автозагрузка и перезагрузка констант</a>
</li><li><a href="/classic-to-zeitwerk-howto">Как перейти с Classic на Zeitwerk</a>
</li><li><a href="/caching-with-rails">Кэширование с Rails: Обзор</a>
</li><li><a href="/active-support-instrumentation">Инструментарий Active Support</a>
</li><li><a href="/api-app">Использование Rails для API-приложений</a>
</li><li><a href="/active-record-postgresql">Active Record для PostgreSQL</a>
</li><li><a href="/active-record-multiple-databases">Несколько баз данных с Active Record</a>
</li><li><a href="/active-record-encryption">Шифрование Active Record</a>
</li></ul></li><li><p><strong>Расширяем Rails</strong></p><ul><li><a href="/plugins">Основы создания плагинов Rails</a>
</li><li><a href="/rails-on-rack">Rails on Rack</a>
</li><li><a href="/generators">Создание и настройка генераторов и шаблонов Rails</a>
</li><li><a href="/engines">Engine для начинающих</a>
</li><li><a href="/threading_and_code_execution">Треды и выполнение кода в Rails</a>
</li><li><a href="/rails-application-templates">Шаблоны приложения Rails</a>
</li></ul></li><li><p><strong>Вносим вклад в Ruby on Rails</strong></p><ul><li><a href="/contributing_to_ruby_on_rails">Вносим вклад в Ruby on Rails</a>
</li><li><a href="/api_documentation_guidelines">Рекомендации по документированию API</a>
</li><li><a href="/ruby_on_rails_guides_guidelines">Рекомендации для руководств по Ruby on Rails</a>
</li><li><a href="/development_dependencies_install">Установка зависимостей для разработки</a>
</li><li><a href="/maintenance-policy">Политика поддержки (версий)</a>
</li></ul></li><li><p><strong>Заметки о релизах</strong></p><ul><li><a href="/upgrading-ruby-on-rails">Апгрейд Ruby on Rails</a>
</li><li><a href="/7_1_release_notes">Версия 7.1 - Октябрь 2023</a>
</li><li><a href="/7_0_release_notes">Версия 7.0 - Декабрь 2021</a>
</li><li><a href="/6_1_release_notes">Версия 6.1 - Декабрь 2020</a>
</li><li><a href="/6_0_release_notes">Версия 6.0 - Август 2019</a>
</li></ul></li></ul>
              </div>
            </li>
            <li>
              <a href="/search">Поиск</a>
            </li>
            <li>
              <a target="blank" href="http://api.rusrails.ru">Ruby &amp; Rails API</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="content-wrapper">
      <div class="container-fluid">
        <div class="row-fluid">
          <div class="span3 pull-right">
            <div class="well social">
              <h4>Принимаем пожелания и пул-реквесты!</h4>
              <iframe allowtransparency="true" frameborder="0" height="30" src="http://ghbtns.com/github-btn.html?user=rusrails&repo=rusrails&type=watch&count=true&size=large" width="180"></iframe>
              <p></p>
              <a class="twitter-follow-button" data-lang="ru" href="https://twitter.com/rusrails"></a>
            </div>
              <div class="well menu">
                    <ul class="nav nav-list">
      <li>
        <h4>
          <a href="#formatirovanie">1. Форматирование</a>
</h4>      </li>
      <li>
        <h5>
          <a href="#daty">1.1. Даты</a>
</h5>      </li>
      <li>
        <h6>
          <a href="#distance_of_time_in_words">1.1.1. distance_of_time_in_words</a>
</h6>      </li>
      <li>
        <h6>
          <a href="#time_ago_in_words">1.1.2. time_ago_in_words</a>
</h6>      </li>
      <li>
        <h5>
          <a href="#chisla">1.2. Числа</a>
</h5>      </li>
      <li>
        <h6>
          <a href="#number_to_currency">1.2.1. number_to_currency</a>
</h6>      </li>
      <li>
        <h6>
          <a href="#number_to_human">1.2.2. number_to_human</a>
</h6>      </li>
      <li>
        <h6>
          <a href="#number_to_human_size">1.2.3. number_to_human_size</a>
</h6>      </li>
      <li>
        <h6>
          <a href="#number_to_percentage">1.2.4. number_to_percentage</a>
</h6>      </li>
      <li>
        <h6>
          <a href="#number_to_phone">1.2.5. number_to_phone</a>
</h6>      </li>
      <li>
        <h6>
          <a href="#number_with_delimiter">1.2.6. number_with_delimiter</a>
</h6>      </li>
      <li>
        <h6>
          <a href="#number_with_precision">1.2.7. number_with_precision</a>
</h6>      </li>
      <li>
        <h5>
          <a href="#tekst">1.3. Текст</a>
</h5>      </li>
      <li>
        <h6>
          <a href="#excerpt">1.3.1. excerpt</a>
</h6>      </li>
      <li>
        <h6>
          <a href="#pluralize">1.3.2. pluralize</a>
</h6>      </li>
      <li>
        <h6>
          <a href="#truncate">1.3.3. truncate</a>
</h6>      </li>
      <li>
        <h6>
          <a href="#word_wrap">1.3.4. word_wrap</a>
</h6>      </li>
      <li>
        <h4>
          <a href="#formy">2. Формы</a>
</h4>      </li>
      <li>
        <h4>
          <a href="#navigatsiya">3. Навигация</a>
</h4>      </li>
      <li>
        <h5>
          <a href="#button_to">3.1. button_to</a>
</h5>      </li>
      <li>
        <h5>
          <a href="#current_page">3.2. current_page?</a>
</h5>      </li>
      <li>
        <h5>
          <a href="#link_to">3.3. link_to</a>
</h5>      </li>
      <li>
        <h5>
          <a href="#mail_to">3.4. mail_to</a>
</h5>      </li>
      <li>
        <h5>
          <a href="#url_for">3.5. url_for</a>
</h5>      </li>
      <li>
        <h4>
          <a href="#ochistka">4. Очистка</a>
</h4>      </li>
      <li>
        <h5>
          <a href="#sanitize">4.1. sanitize</a>
</h5>      </li>
      <li>
        <h5>
          <a href="#sanitize_css">4.2. sanitize_css</a>
</h5>      </li>
      <li>
        <h5>
          <a href="#strip_links">4.3. strip_links</a>
</h5>      </li>
      <li>
        <h5>
          <a href="#strip_tags">4.4. strip_tags</a>
</h5>      </li>
      <li>
        <h4>
          <a href="#resursy">5. Ресурсы</a>
</h4>      </li>
      <li>
        <h5>
          <a href="#audio_tag">5.1. audio_tag</a>
</h5>      </li>
      <li>
        <h5>
          <a href="#auto_discovery_link_tag">5.2. auto_discovery_link_tag</a>
</h5>      </li>
      <li>
        <h5>
          <a href="#favicon_link_tag">5.3. favicon_link_tag</a>
</h5>      </li>
      <li>
        <h5>
          <a href="#image_tag">5.4. image_tag</a>
</h5>      </li>
      <li>
        <h5>
          <a href="#javascript_include_tag">5.5. javascript_include_tag</a>
</h5>      </li>
      <li>
        <h5>
          <a href="#picture_tag">5.6. picture_tag</a>
</h5>      </li>
      <li>
        <h5>
          <a href="#preload_link_tag">5.7. preload_link_tag</a>
</h5>      </li>
      <li>
        <h5>
          <a href="#stylesheet_link_tag">5.8. stylesheet_link_tag</a>
</h5>      </li>
      <li>
        <h5>
          <a href="#video_tag">5.9. video_tag</a>
</h5>      </li>
      <li>
        <h4>
          <a href="#javascript">6. JavaScript</a>
</h4>      </li>
      <li>
        <h5>
          <a href="#escape_javascript">6.1. escape_javascript</a>
</h5>      </li>
      <li>
        <h5>
          <a href="#javascript_tag">6.2. javascript_tag</a>
</h5>      </li>
      <li>
        <h4>
          <a href="#alternativnye-tegi">7. Альтернативные теги</a>
</h4>      </li>
      <li>
        <h5>
          <a href="#tag">7.1. tag</a>
</h5>      </li>
      <li>
        <h5>
          <a href="#token_list">7.2. token_list</a>
</h5>      </li>
      <li>
        <h4>
          <a href="#bloki-zahvata">8. Блоки захвата</a>
</h4>      </li>
      <li>
        <h5>
          <a href="#capture">8.1. capture</a>
</h5>      </li>
      <li>
        <h5>
          <a href="#content_for">8.2. content_for</a>
</h5>      </li>
      <li>
        <h4>
          <a href="#proizvoditelnost">9. Производительность</a>
</h4>      </li>
      <li>
        <h5>
          <a href="#benchmark">9.1. benchmark</a>
</h5>      </li>
      <li>
        <h5>
          <a href="#cache">9.2. cache</a>
</h5>      </li>
      <li>
        <h4>
          <a href="#raznoe">10. Разное</a>
</h4>      </li>
      <li>
        <h5>
          <a href="#atom_feed">10.1. atom_feed</a>
</h5>      </li>
      <li>
        <h5>
          <a href="#debug">10.2. debug</a>
</h5>      </li>
</ul>

              </div>
            <div class="well banner300 banner">
              <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<!-- sidebar rusrails -->
<ins class="adsbygoogle"
     style="display:inline-block;width:300px;height:600px"
     data-ad-client="ca-pub-7764391801669990"
     data-ad-slot="6089520660"></ins>


<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

            </div>
          </div>
          <div class="span9 content pull-left">
            <div class="banner">
              <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

  <!-- top rusrails -->
  <ins class="adsbygoogle"
       style="display:inline-block;width:980px;height:120px"
       data-ad-client="ca-pub-7764391801669990"
       data-ad-slot="4891989065"></ins>


<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

            </div>
              <h2 id='helpery-action-view' class='inside_page_header'> Хелперы Action View</h2><p>После прочтения этого руководства вы узнаете:</p><ul><li>Как форматировать даты, строки и числа.
</li><li>Как работать с текстом и тегами.
</li><li>Как сделать ссылки на изображения, видео, таблицы стилей и так далее.
</li><li>Как работать с лентами новостей Atom и JavaScript во вью.
</li><li>Как кэшировать, захватывать, отлаживать и очищать контент.
</li></ul>
<hr>
<p>Данный документ содержит описание** некоторых из наиболее часто используемых хелперов,** доступных в Action View. Он служит хорошей отправной точкой, но также рекомендуется ознакомиться с полной <a href="https://api.rubyonrails.org/classes/ActionView/Helpers.html">API-документацией</a>, которая более подробно описывает все хелперы.</p><h3 id='formatirovanie' class='inside_page_header'><a href="#formatirovanie">1.</a> Форматирование</h3><h4 id='daty' class='inside_page_header'><a href="#daty">1.1.</a> Даты</h4><p>Эти хелперы облегчают отображение элементов даты и/или времени в виде понятных для человека, адаптированных к контексту форматов.</p><h5 id='distance_of_time_in_words' class='inside_page_header'><a href="#distance_of_time_in_words">1.1.1.</a> distance_of_time_in_words</h5><p>Сообщает о приблизительной разнице во времени между двумя объектами <code>Time</code> или <code>Date</code> или целыми числами в секундах. Установите <code>include_seconds</code> в значение true, если требуются более подробные расчеты.</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">distance_of_time_in_words</span><span class="p">(</span><span class="no">Time</span><span class="p">.</span><span class="nf">current</span><span class="p">,</span> <span class="mi">15</span><span class="p">.</span><span class="nf">seconds</span><span class="p">.</span><span class="nf">from_now</span><span class="p">)</span>
<span class="c1"># =&gt; less than a minute</span>
<span class="n">distance_of_time_in_words</span><span class="p">(</span><span class="no">Time</span><span class="p">.</span><span class="nf">current</span><span class="p">,</span> <span class="mi">15</span><span class="p">.</span><span class="nf">seconds</span><span class="p">.</span><span class="nf">from_now</span><span class="p">,</span> <span class="ss">include_seconds: </span><span class="kp">true</span><span class="p">)</span>
<span class="c1"># =&gt; less than 20 seconds</span>
</code></pre>
</div>
<div class="note"><p>Мы используем <code>Time.current</code> вместо <code>Time.now</code>, потому что он возвращает текущее время с учетом часового пояса, установленного в Rails, в то время как <code>Time.now</code> возвращает объект Time с учетом часового пояса сервера.</p></div><p>Подробности смотрите в <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-distance_of_time_in_words">API-документации</a>.</p><h5 id='time_ago_in_words' class='inside_page_header'><a href="#time_ago_in_words">1.1.2.</a> time_ago_in_words</h5><p>Сообщает о приблизительной разнице во времени между объектом <code>Time</code> или <code>Date</code> или целым числом в секундах и <code>Time.current</code>.</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">time_ago_in_words</span><span class="p">(</span><span class="mi">3</span><span class="p">.</span><span class="nf">minutes</span><span class="p">.</span><span class="nf">from_now</span><span class="p">)</span> <span class="c1"># =&gt; 3 minutes</span>
</code></pre>
</div>
<p>Подробности смотрите в <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-time_ago_in_words">API-документации</a>.</p><h4 id='chisla' class='inside_page_header'><a href="#chisla">1.2.</a> Числа</h4><p>Набор методов для преобразования чисел в форматированные строки. Методы предоставляются для телефонных номеров, валюты, процентов, точности, позиционной записи и размера файла.</p><h5 id='number_to_currency' class='inside_page_header'><a href="#number_to_currency">1.2.1.</a> number_to_currency</h5><p>Форматирует число в строку валюты (например, $13.65).</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">number_to_currency</span><span class="p">(</span><span class="mf">1234567890.50</span><span class="p">)</span> <span class="c1"># =&gt; $1,234,567,890.50</span>
</code></pre>
</div>
<p>Подробности смотрите в <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_to_currency">API-документации</a>.</p><h5 id='number_to_human' class='inside_page_header'><a href="#number_to_human">1.2.2.</a> number_to_human</h5><p>Оформляет число в удобочитаемый формат (форматирует и округляет); полезно для чисел, которые могут очень большими.</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">number_to_human</span><span class="p">(</span><span class="mi">1234</span><span class="p">)</span>    <span class="c1"># =&gt; 1.23 Thousand</span>
<span class="n">number_to_human</span><span class="p">(</span><span class="mi">1234567</span><span class="p">)</span> <span class="c1"># =&gt; 1.23 Million</span>
</code></pre>
</div>
<p>Подробности смотрите в <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_to_human">API-документации</a>.</p><h5 id='number_to_human_size' class='inside_page_header'><a href="#number_to_human_size">1.2.3.</a> number_to_human_size</h5><p>Форматирует размер в байтах в более понятный вид; полезно для отображения размеров файлов пользователям.</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">number_to_human_size</span><span class="p">(</span><span class="mi">1234</span><span class="p">)</span>    <span class="c1"># =&gt; 1.21 KB</span>
<span class="n">number_to_human_size</span><span class="p">(</span><span class="mi">1234567</span><span class="p">)</span> <span class="c1"># =&gt; 1.18 MB</span>
</code></pre>
</div>
<p>Подробности смотрите в <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_to_human_size">API-документации</a>.</p><h5 id='number_to_percentage' class='inside_page_header'><a href="#number_to_percentage">1.2.4.</a> number_to_percentage</h5><p>Форматирует число как строковое представление процента.</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">number_to_percentage</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="ss">precision: </span><span class="mi">0</span><span class="p">)</span> <span class="c1"># =&gt; 100%</span>
</code></pre>
</div>
<p>Подробности смотрите в <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_to_percentage">API-документации</a>.</p><h5 id='number_to_phone' class='inside_page_header'><a href="#number_to_phone">1.2.5.</a> number_to_phone</h5><p>Форматирует номер телефона (по умолчанию в формате США).</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">number_to_phone</span><span class="p">(</span><span class="mi">1235551234</span><span class="p">)</span> <span class="c1"># =&gt; 123-555-1234</span>
</code></pre>
</div>
<p>Подробности смотрите в <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_to_phone">API-документации</a>.</p><h5 id='number_with_delimiter' class='inside_page_header'><a href="#number_with_delimiter">1.2.6.</a> number_with_delimiter</h5><p>Форматирует число с группировкой тысяч с помощью разделителя.</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">number_with_delimiter</span><span class="p">(</span><span class="mi">12345678</span><span class="p">)</span> <span class="c1"># =&gt; 12,345,678</span>
</code></pre>
</div>
<p>Подробности смотрите в <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_with_delimiter">API-документации</a>.</p><h5 id='number_with_precision' class='inside_page_header'><a href="#number_with_precision">1.2.7.</a> number_with_precision</h5><p>Форматирует число с указанной точностью <code>precision</code>, которая по умолчанию равна 3.</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">number_with_precision</span><span class="p">(</span><span class="mf">111.2345</span><span class="p">)</span>               <span class="c1"># =&gt; 111.235</span>
<span class="n">number_with_precision</span><span class="p">(</span><span class="mf">111.2345</span><span class="p">,</span> <span class="ss">precision: </span><span class="mi">2</span><span class="p">)</span> <span class="c1"># =&gt; 111.23</span>
</code></pre>
</div>
<p>Подробности смотрите в <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_with_precision">API-документации</a>.</p><h4 id='tekst' class='inside_page_header'><a href="#tekst">1.3.</a> Текст</h4><p>Набор методов для фильтрации, форматирования и преобразования строк.</p><h5 id='excerpt' class='inside_page_header'><a href="#excerpt">1.3.1.</a> excerpt</h5><p>Учитывая <code>text</code> и <code>phrase</code>, <code>excerpt</code> осуществляет поиск и извлечение первого вхождения <code>phrase</code>, а также запрошенного окружающего текста, определяемого <code>radius</code>. Если начало/конец результата не совпадает с началом/концом текста,
добавляется маркер пропуска.</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">excerpt</span><span class="p">(</span><span class="s2">"This is a very beautiful morning"</span><span class="p">,</span> <span class="s2">"very"</span><span class="p">,</span> <span class="ss">separator: </span><span class="s2">" "</span><span class="p">,</span> <span class="ss">radius: </span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># =&gt; ...a very beautiful...</span>

<span class="n">excerpt</span><span class="p">(</span><span class="s2">"This is also an example"</span><span class="p">,</span> <span class="s2">"an"</span><span class="p">,</span> <span class="ss">radius: </span><span class="mi">8</span><span class="p">,</span> <span class="ss">omission: </span><span class="s2">"&lt;chop&gt; "</span><span class="p">)</span>
<span class="c1">#=&gt; &lt;chop&gt; is also an example</span>
</code></pre>
</div>
<p>Подробности смотрите в <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-excerpt">API-документации</a>.</p><h5 id='pluralize' class='inside_page_header'><a href="#pluralize">1.3.2.</a> pluralize</h5><p>Определяет единственное или множественное число слова на основе значения числа.</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">pluralize</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">"person"</span><span class="p">)</span> <span class="c1"># =&gt; 1 person</span>
<span class="n">pluralize</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s2">"person"</span><span class="p">)</span> <span class="c1"># =&gt; 2 people</span>
<span class="n">pluralize</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s2">"person"</span><span class="p">,</span> <span class="ss">plural: </span><span class="s2">"users"</span><span class="p">)</span> <span class="c1"># =&gt; 3 users</span>
</code></pre>
</div>
<p>Подробности смотрите в <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-pluralize">API-документации</a>.</p><h5 id='truncate' class='inside_page_header'><a href="#truncate">1.3.3.</a> truncate</h5><p>Обрезает заданный <code>text</code> до указанной <code>length</code>. Если текст обрезан, к результату будет добавлен маркер усечения, при этом общая длина не превысит <code>length</code>.</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">truncate</span><span class="p">(</span><span class="s2">"Once upon a time in a world far far away"</span><span class="p">)</span>
<span class="c1"># =&gt; "Once upon a time in a world..."</span>

<span class="n">truncate</span><span class="p">(</span><span class="s2">"Once upon a time in a world far far away"</span><span class="p">,</span> <span class="ss">length: </span><span class="mi">17</span><span class="p">)</span>
<span class="c1"># =&gt; "Once upon a ti..."</span>

<span class="n">truncate</span><span class="p">(</span><span class="s2">"one-two-three-four-five"</span><span class="p">,</span> <span class="ss">length: </span><span class="mi">20</span><span class="p">,</span> <span class="ss">separator: </span><span class="s2">"-"</span><span class="p">)</span>
<span class="c1"># =&gt; "one-two-three..."</span>

<span class="n">truncate</span><span class="p">(</span><span class="s2">"And they found that many people were sleeping better."</span><span class="p">,</span> <span class="ss">length: </span><span class="mi">25</span><span class="p">,</span> <span class="ss">omission: </span><span class="s2">"... (continued)"</span><span class="p">)</span>
<span class="c1"># =&gt; "And they f... (continued)"</span>

<span class="n">truncate</span><span class="p">(</span><span class="s2">"&lt;p&gt;Once upon a time in a world far far away&lt;/p&gt;"</span><span class="p">,</span> <span class="ss">escape: </span><span class="kp">false</span><span class="p">)</span>
<span class="c1"># =&gt; "&lt;p&gt;Once upon a time in a wo..."</span>
</code></pre>
</div>
<p>Подробности смотрите в <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-truncate">API-документации</a>.</p><h5 id='word_wrap' class='inside_page_header'><a href="#word_wrap">1.3.4.</a> word_wrap</h5><p>Оборачивает текст в строчки с длиной не более <code>line_width</code>.</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">word_wrap</span><span class="p">(</span><span class="s2">"Once upon a time"</span><span class="p">,</span> <span class="ss">line_width: </span><span class="mi">8</span><span class="p">)</span>
<span class="c1"># =&gt; "Once\nupon a\ntime"</span>
</code></pre>
</div>
<p>Подробности смотрите в <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-word_wrap">API-документации</a>.</p><h3 id='formy' class='inside_page_header'><a href="#formy">2.</a> Формы</h3><p>Хелперы форм упрощают работу с моделями по сравнению с использованием только стандартных HTML-элементов. Они предлагают ряд методов, специально разработанных для генерации форм на основе ваших моделей. Некоторые методы соответствуют определенному типу полей ввода, таких как текстовые поля, поля пароля, раскрывающиеся списки и т.д. При отправке формы, значения всех ее полей объединяются в объект params и передаются в контроллер.</p><p>Подробнее изучить хелперы форм можно в <a href="/form-helpers">руководстве по хелперам форм в Action View</a>.</p><h3 id='navigatsiya' class='inside_page_header'><a href="#navigatsiya">3.</a> Навигация</h3><p>Набор методов для создания ссылок и URL-адресов на основе подсистемы маршрутизации.</p><h4 id='button_to' class='inside_page_header'><a href="#button_to">3.1.</a> button_to</h4><p>Генерирует форму, которая отправляется по указанному URL-адресу. Форма имеет кнопку отправки со значением <code>name</code>.</p><div class="code_container">
  <pre><code class="highlight erb"><span class="cp">&lt;%=</span> <span class="n">button_to</span> <span class="s2">"Sign in"</span><span class="p">,</span> <span class="n">sign_in_path</span> <span class="cp">%&gt;</span>
</code></pre>
</div>
<p>что приведет к следующему HTML:</p><div class="code_container">
  <pre><code class="highlight html"><span class="nt">&lt;form</span> <span class="na">method=</span><span class="s">"post"</span> <span class="na">action=</span><span class="s">"/sessions"</span> <span class="na">class=</span><span class="s">"button_to"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"Sign in"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</code></pre>
</div>
<p>Подробности смотрите в <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-button_to">API-документации</a>.</p><h4 id='current_page' class='inside_page_header'><a href="#current_page">3.2.</a> current_page?</h4><p>Возвращает true, если текущий URL-адрес запроса совпадает с заданными <code>options</code>.</p><div class="code_container">
  <pre><code class="highlight erb"><span class="cp">&lt;%</span> <span class="k">if</span> <span class="n">current_page?</span><span class="p">(</span><span class="ss">controller: </span><span class="s1">'profiles'</span><span class="p">,</span> <span class="ss">action: </span><span class="s1">'show'</span><span class="p">)</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;strong&gt;</span>Currently on the profile page<span class="nt">&lt;/strong&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre>
</div>
<p>Подробности смотрите в <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-current_page-3F">API-документации</a>.</p><h4 id='link_to' class='inside_page_header'><a href="#link_to">3.3.</a> link_to</h4><p>Связывает с URL, внутренне используя хелпер <code>url_for</code>. Он обычно используется для создания ссылок на ресурсы RESTful, особенно пре передаче моделей в качестве аргументов в <code>link_to</code>.</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">link_to</span> <span class="s2">"Profile"</span><span class="p">,</span> <span class="vi">@profile</span>
<span class="c1"># =&gt; &lt;a href="/profiles/1"&gt;Profile&lt;/a&gt;</span>

<span class="n">link_to</span> <span class="s2">"Book"</span><span class="p">,</span> <span class="vi">@book</span> <span class="c1"># допустим составной первичный ключ [:author_id, :id]</span>
<span class="c1"># =&gt; &lt;a href="/books/2_1"&gt;Book&lt;/a&gt;</span>

<span class="n">link_to</span> <span class="s2">"Profiles"</span><span class="p">,</span> <span class="n">profiles_path</span>
<span class="c1"># =&gt; &lt;a href="/profiles"&gt;Profiles&lt;/a&gt;</span>

<span class="n">link_to</span> <span class="kp">nil</span><span class="p">,</span> <span class="s2">"https://example.com"</span>
<span class="c1"># =&gt; &lt;a href="https://www.example.com"&gt;https://www.example.com&lt;/a&gt;</span>

<span class="n">link_to</span> <span class="s2">"Articles"</span><span class="p">,</span> <span class="n">articles_path</span><span class="p">,</span> <span class="ss">id: </span><span class="s2">"articles"</span><span class="p">,</span> <span class="ss">class: </span><span class="s2">"article__container"</span>
<span class="c1"># =&gt; &lt;a href="/articles" class="article__container" id="articles"&gt;Articles&lt;/a&gt;</span>
</code></pre>
</div>
<p>Вы можете использовать блок, если целевой объект ссылки не помещается в параметр &quot;name&quot;.</p><div class="code_container">
  <pre><code class="highlight erb"><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="vi">@profile</span> <span class="k">do</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;strong&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@profile</span><span class="p">.</span><span class="nf">name</span> <span class="cp">%&gt;</span><span class="nt">&lt;/strong&gt;</span> -- <span class="nt">&lt;span&gt;</span>Check it out!<span class="nt">&lt;/span&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre>
</div>
<p>что приведет к следующему HTML:</p><div class="code_container">
  <pre><code class="highlight html"><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/profiles/1"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;strong&gt;</span>David<span class="nt">&lt;/strong&gt;</span> -- <span class="nt">&lt;span&gt;</span>Check it out!<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/a&gt;</span>
</code></pre>
</div>
<p>Подробности смотрите в <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to">API-документации</a>.</p><h4 id='mail_to' class='inside_page_header'><a href="#mail_to">3.4.</a> mail_to</h4><p>Создает тег ссылки <code>mailto</code> для указанного адреса электронной почты. Вы также можете указать текст ссылки, дополнительные HTML-параметры и необходимость кодировки адреса электронной почты.</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">mail_to</span> <span class="s2">"john_doe@gmail.com"</span>
<span class="c1"># =&gt; &lt;a href="mailto:john_doe@gmail.com"&gt;john_doe@gmail.com&lt;/a&gt;</span>

<span class="n">mail_to</span> <span class="s2">"me@john_doe.com"</span><span class="p">,</span> <span class="ss">cc: </span><span class="s2">"me@jane_doe.com"</span><span class="p">,</span>
        <span class="ss">subject: </span><span class="s2">"This is an example email"</span>
<span class="c1"># =&gt; &lt;a href="mailto:"me@john_doe.com?cc=me@jane_doe.com&amp;subject=This%20is%20an%20example%20email"&gt;"me@john_doe.com&lt;/a&gt;</span>
</code></pre>
</div>
<p>Подробности смотрите в <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-mail_to">API-документации</a>.</p><h4 id='url_for' class='inside_page_header'><a href="#url_for">3.5.</a> url_for</h4><p>Возвращает URL-адрес на основе предоставленного набора <code>options</code>.</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">url_for</span> <span class="vi">@profile</span>
<span class="c1"># =&gt; /profiles/1</span>

<span class="n">url_for</span> <span class="p">[</span> <span class="vi">@hotel</span><span class="p">,</span> <span class="vi">@booking</span><span class="p">,</span> <span class="ss">page: </span><span class="mi">2</span><span class="p">,</span> <span class="ss">line: </span><span class="mi">3</span> <span class="p">]</span>
<span class="c1"># =&gt; /hotels/1/bookings/1?line=3&amp;page=2</span>

<span class="n">url_for</span> <span class="vi">@post</span> <span class="c1"># given a composite primary key [:blog_id, :id]</span>
<span class="c1"># =&gt; /posts/1_2</span>
</code></pre>
</div>
<h3 id='ochistka' class='inside_page_header'><a href="#ochistka">4.</a> Очистка</h3><p>Набор методов предназначен для очистки текста от нежелательных HTML-элементов. Эти вспомогательные методы особенно полезны для того, чтобы гарантировать отображение только безопасного и валидного HTML/CSS. Они также могут быть полезны для предотвращения XSS атак путем экранирования или удаления потенциально вредоносного контента из пользовательского ввода перед его отображением в ваших вью.</p><p>Эта функциональность внутренне обеспечивается гемом <a href="https://github.com/rails/rails-html-sanitizer">rails-html-sanitizer</a>.</p><h4 id='sanitize' class='inside_page_header'><a href="#sanitize">4.1.</a> sanitize</h4><p>Метод <code>sanitize</code> закодирует все HTML-теги и удалит все атрибуты, которые явно не разрешены.</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">sanitize</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">body</span>
</code></pre>
</div>
<p>Если указать любую из опций <code>:attributes</code> или <code>:tags</code>, то будут разрешены только указанные атрибуты и теги, и ничего более.</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">sanitize</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">body</span><span class="p">,</span> <span class="ss">tags: </span><span class="sx">%w(table tr td)</span><span class="p">,</span> <span class="ss">attributes: </span><span class="sx">%w(id class style)</span>
</code></pre>
</div>
<p>Чтобы изменить настройки по умолчанию для многократного использования, например, добавив теги таблиц к разрешенным по умолчанию:</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="c1"># config/application.rb</span>
<span class="k">class</span> <span class="nc">Application</span> <span class="o">&lt;</span> <span class="no">Rails</span><span class="o">::</span><span class="no">Application</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">action_view</span><span class="p">.</span><span class="nf">sanitized_allowed_tags</span> <span class="o">=</span> <span class="sx">%w(table tr td)</span>
<span class="k">end</span>
</code></pre>
</div>
<p>Эта функциональность внутренне обеспечивается гемом <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html#method-i-sanitize">rails-html-sanitizer</a>.</p><h4 id='sanitize_css' class='inside_page_header'><a href="#sanitize_css">4.2.</a> sanitize_css</h4><p>Очищает блок кода CSS, особенно когда он задан через атрибут style в HTML-контенте. <code>sanitize_css</code> особенно актуальна при работе с пользовательским контентом или динамическим контентом, который может включать атрибуты стилей.</p><p>Метод <code>sanitize_css</code>, описанный ниже, удалит все неразрешенные стили.</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">sanitize_css</span><span class="p">(</span><span class="s2">"background-color: red; color: white; font-size: 16px;"</span><span class="p">)</span>
</code></pre>
</div>
<p>Подробности смотрите в <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html#method-i-sanitize_css">API-документации</a>.</p><h4 id='strip_links' class='inside_page_header'><a href="#strip_links">4.3.</a> strip_links</h4><p>Удаляет все теги ссылок из текста, оставляя только сам текст ссылки.</p><p>Strips all link tags from text leaving just the link text.</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">strip_links</span><span class="p">(</span><span class="s2">"&lt;a href='https://rubyonrails.org'&gt;Ruby on Rails&lt;/a&gt;"</span><span class="p">)</span>
<span class="c1"># =&gt; Ruby on Rails</span>

<span class="n">strip_links</span><span class="p">(</span><span class="s2">"emails to &lt;a href='mailto:me@email.com'&gt;me@email.com&lt;/a&gt;."</span><span class="p">)</span>
<span class="c1"># =&gt; emails to me@email.com.</span>

<span class="n">strip_links</span><span class="p">(</span><span class="s2">"Blog: &lt;a href='http://myblog.com/'&gt;Visit&lt;/a&gt;."</span><span class="p">)</span>
<span class="c1"># =&gt; Blog: Visit.</span>
</code></pre>
</div>
<p>Подробности смотрите в <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html#method-i-strip_links">API-документации</a>.</p><h4 id='strip_tags' class='inside_page_header'><a href="#strip_tags">4.4.</a> strip_tags</h4><p>Удаляет все HTML-теги из HTML, включая комментарии и специальные символы.</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">strip_tags</span><span class="p">(</span><span class="s2">"Strip &lt;i&gt;these&lt;/i&gt; tags!"</span><span class="p">)</span>
<span class="c1"># =&gt; Strip these tags!</span>

<span class="n">strip_tags</span><span class="p">(</span><span class="s2">"&lt;b&gt;Bold&lt;/b&gt; no more! &lt;a href='more.html'&gt;See more&lt;/a&gt;"</span><span class="p">)</span>
<span class="c1"># =&gt; Bold no more! See more</span>

<span class="n">strip_links</span><span class="p">(</span><span class="s1">'&lt;&lt;a href="https://example.org"&gt;malformed &amp; link&lt;/a&gt;'</span><span class="p">)</span>
<span class="c1"># =&gt; &amp;lt;malformed &amp;amp; link</span>
</code></pre>
</div>
<p>Подробности смотрите в <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html#method-i-strip_tags">API-документации</a>.</p><h3 id='resursy' class='inside_page_header'><a href="#resursy">5.</a> Ресурсы</h3><p>Набор методов для генерации HTML, который связывает вью с различными ресурсами, такими как изображения, JavaScript-файлы, таблицы стилей и ленты новостей.</p><p>По умолчанию, Rails создает ссылки на эти ресурсы с текущего хоста в папке public. Однако, вы можете настроить Rails на использование отдельного сервера для хранения этих ресурсов, установив параметр <a href="configuring.html#config-asset-host"><code>config.asset_host</code></a> в конфигурации приложения, обычно в <code>config/environments/production.rb</code>.</p><p>Например, допустим, ваш хост для ресурсов  - <code>assets.example.com</code>:</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">config</span><span class="p">.</span><span class="nf">asset_host</span> <span class="o">=</span> <span class="s2">"assets.example.com"</span>
</code></pre>
</div>
<p>в таком случае, соответствующий URL для <code>image_tag</code> будет:</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">image_tag</span><span class="p">(</span><span class="s2">"rails.png"</span><span class="p">)</span>
<span class="c1"># =&gt; &lt;img src="//assets.example.com/images/rails.png" /&gt;</span>
</code></pre>
</div>
<h4 id='audio_tag' class='inside_page_header'><a href="#audio_tag">5.1.</a> audio_tag</h4><p>Генерирует HTML-тег audio или как одиночный тэг для строкового источника. либо вложенные теги источника для массива нескольких источников. <code>sources</code> могут быть полными путями, файлами в вашей публичной директории аудио или <a href="/active_storage_overview">вложениями Active Storage</a>.</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">audio_tag</span><span class="p">(</span><span class="s2">"sound"</span><span class="p">)</span>
<span class="c1"># =&gt; &lt;audio src="/audios/sound"&gt;&lt;/audio&gt;</span>

<span class="n">audio_tag</span><span class="p">(</span><span class="s2">"sound.wav"</span><span class="p">,</span> <span class="s2">"sound.mid"</span><span class="p">)</span>
<span class="c1"># =&gt; &lt;audio&gt;&lt;source src="/audios/sound.wav" /&gt;&lt;source src="/audios/sound.mid" /&gt;&lt;/audio&gt;</span>

<span class="n">audio_tag</span><span class="p">(</span><span class="s2">"sound"</span><span class="p">,</span> <span class="ss">controls: </span><span class="kp">true</span><span class="p">)</span>
<span class="c1"># =&gt; &lt;audio controls="controls" src="/audios/sound"&gt;&lt;/audio&gt;</span>
</code></pre>
</div>
<div class="info"><p>Внутренняя реализация <code>audio_tag</code> использует <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/AssetUrlHelper.html#method-i-audio_path"><code>audio_path</code> из AssetUrlHelpers</a> для построения пути к аудиофайлу.</p></div><p>Подробности смотрите в <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-audio_tag">API-документации</a>.</p><h4 id='auto_discovery_link_tag' class='inside_page_header'><a href="#auto_discovery_link_tag">5.2.</a> auto_discovery_link_tag</h4><p>Возвращает тег ссылки, который браузеры и программы чтения лент новостей могут использовать для автоматического обнаружения лент новостей RSS, Atom или JSON.</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">auto_discovery_link_tag</span><span class="p">(</span><span class="ss">:rss</span><span class="p">,</span> <span class="s2">"http://www.example.com/feed.rss"</span><span class="p">,</span> <span class="p">{</span> <span class="ss">title: </span><span class="s2">"RSS Feed"</span> <span class="p">})</span>
<span class="c1"># =&gt; &lt;link rel="alternate" type="application/rss+xml" title="RSS Feed" href="http://www.example.com/feed.rss" /&gt;</span>
</code></pre>
</div>
<p>Подробности смотрите в <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-auto_discovery_link_tag">API-документации</a>.</p><h4 id='favicon_link_tag' class='inside_page_header'><a href="#favicon_link_tag">5.3.</a> favicon_link_tag</h4><p>Возвращает тег ссылки для иконки, управляемый конвейером ресурсов. <code>source</code> может быть полным путем к файлу или файлом, находящимся в вашей директории ресурсов.</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">favicon_link_tag</span>
<span class="c1"># =&gt; &lt;link href="/assets/favicon.ico" rel="icon" type="image/x-icon" /&gt;</span>
</code></pre>
</div>
<p>Подробности смотрите в <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-favicon_link_tag">API-документации</a>.</p><h4 id='image_tag' class='inside_page_header'><a href="#image_tag">5.4.</a> image_tag</h4><p>Возвращает HTML-тег изображения для указанного источника. <code>source</code> может быть полным путем к изображению или файлом, находящимся в директории <code>app/assets/images</code>.</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">image_tag</span><span class="p">(</span><span class="s2">"icon.png"</span><span class="p">)</span>
<span class="c1"># =&gt; &lt;img src="/assets/icon.png" /&gt;</span>

<span class="n">image_tag</span><span class="p">(</span><span class="s2">"icon.png"</span><span class="p">,</span> <span class="ss">size: </span><span class="s2">"16x10"</span><span class="p">,</span> <span class="ss">alt: </span><span class="s2">"Edit Article"</span><span class="p">)</span>
<span class="c1"># =&gt; &lt;img src="/assets/icon.png" width="16" height="10" alt="Edit Article" /&gt;</span>
</code></pre>
</div>
<div class="info"><p>Внутренне, <code>image_tag</code> использует <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/AssetUrlHelper.html#method-i-image_path"><code>image_path</code> из AssetUrlHelpers</a> для построения пути к изображению.</p></div><p>Подробности смотрите в <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-image_tag">API-документации</a>.</p><h4 id='javascript_include_tag' class='inside_page_header'><a href="#javascript_include_tag">5.5.</a> javascript_include_tag</h4><p>Возвращает HTML-тег скрипта для каждого из указанных источников. Вы можете передать имя (расширение <code>.js</code> не обязательно) JavaScript-файлов из директории <code>app/assets/javascripts</code> для включения на текущую страницу, или можете передать полный путь к файлу относительно корня вашего документа.</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">javascript_include_tag</span><span class="p">(</span><span class="s2">"common"</span><span class="p">)</span>
<span class="c1"># =&gt; &lt;script src="/assets/common.js"&gt;&lt;/script&gt;</span>

<span class="n">javascript_include_tag</span><span class="p">(</span><span class="s2">"common"</span><span class="p">,</span> <span class="ss">async: </span><span class="kp">true</span><span class="p">)</span>
<span class="c1"># =&gt; &lt;script src="/assets/common.js" async="async"&gt;&lt;/script&gt;</span>
</code></pre>
</div>
<p>Некоторые из наиболее распространенных атрибутов - <code>async</code> и <code>defer</code>, где <code>async</code> - позволит загружать скрипт параллельно, чтобы разобрать и выполнить его как можно скорее, а <code>defer</code> - укажет, что скрипт должен быть выполнен после того, как документ был полностью разобран.</p><div class="info"><p>Внутренне, <code>javascript_include_tag</code> использует <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/AssetUrlHelper.html#method-i-javascript_path"><code>javascript_path</code> из AssetUrlHelpers</a> для построения пути к скрипту.</p></div><p>Подробности смотрите в <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-javascript_include_tag">API-документации</a>.</p><h4 id='picture_tag' class='inside_page_header'><a href="#picture_tag">5.6.</a> picture_tag</h4><p>Возвращает HTML-тег picture для указанного источника. Она поддерживает передачу String, Array или Block.</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">picture_tag</span><span class="p">(</span><span class="s2">"icon.webp"</span><span class="p">,</span> <span class="s2">"icon.png"</span><span class="p">)</span>
</code></pre>
</div>
<p>Это сгенерирует следующий HTML:</p><div class="code_container">
  <pre><code class="highlight html"><span class="nt">&lt;picture&gt;</span>
  <span class="nt">&lt;source</span> <span class="na">srcset=</span><span class="s">"/assets/icon.webp"</span> <span class="na">type=</span><span class="s">"image/webp"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;source</span> <span class="na">srcset=</span><span class="s">"/assets/icon.png"</span> <span class="na">type=</span><span class="s">"image/png"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"/assets/icon.png"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/picture&gt;</span>
</code></pre>
</div>
<p>Подробности смотрите в <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-picture_tag">API-документации</a>.</p><h4 id='preload_link_tag' class='inside_page_header'><a href="#preload_link_tag">5.7.</a> preload_link_tag</h4><p>Возвращает тег ссылки, который браузеры могут использовать для предварительной загрузки источника. Источник может быть путем к ресурсу, управляемому конвейером ресурсов, полным путем или URI.</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">preload_link_tag</span><span class="p">(</span><span class="s2">"application.css"</span><span class="p">)</span>
<span class="c1"># =&gt; &lt;link rel="preload" href="/assets/application.css" as="style" type="text/css" /&gt;</span>
</code></pre>
</div>
<p>Подробности смотрите в <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-preload_link_tag">API-документации</a>.</p><h4 id='stylesheet_link_tag' class='inside_page_header'><a href="#stylesheet_link_tag">5.8.</a> stylesheet_link_tag</h4><p>Возвращает тег ссылки на таблицу стилей для указанных источников. Если вы не укажете расширение файла, <code>.css</code> будет автоматически добавлено.</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">stylesheet_link_tag</span><span class="p">(</span><span class="s2">"application"</span><span class="p">)</span>
<span class="c1"># =&gt; &lt;link href="/assets/application.css" rel="stylesheet" /&gt;</span>

<span class="n">stylesheet_link_tag</span><span class="p">(</span><span class="s2">"application"</span><span class="p">,</span> <span class="ss">media: </span><span class="s2">"all"</span><span class="p">)</span>
<span class="c1"># =&gt; &lt;link href="/assets/application.css" media="all" rel="stylesheet" /&gt;</span>
</code></pre>
</div>
<p><code>media</code> используется для определения типа носителя для ссылки. Наиболее распространенные типы носителей: <code>all</code>, <code>screen</code>, <code>print</code> и <code>speech</code>.</p><div class="info"><p>Внутренне, <code>stylesheet_link_tag</code> использует <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/AssetUrlHelper.html#method-i-stylesheet_path"><code>stylesheet_path</code> из AssetUrlHelpers</a> для построения пути к таблице стилей.</p></div><p>Подробности смотрите в <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-stylesheet_link_tag">API-документации</a>.</p><h4 id='video_tag' class='inside_page_header'><a href="#video_tag">5.9.</a> video_tag</h4><p>Генерирует HTML-тег video с источником(ами), или как отдельный тег для строкового источника или вложенные теги источника для массива нескольких источников. Источники могут быть полными путями, файлами из публичной директории videos или вложениями Active Storage.</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">video_tag</span><span class="p">(</span><span class="s2">"trailer"</span><span class="p">)</span>
<span class="c1"># =&gt; &lt;video src="/videos/trailer"&gt;&lt;/video&gt;</span>

<span class="n">video_tag</span><span class="p">([</span><span class="s2">"trailer.ogg"</span><span class="p">,</span> <span class="s2">"trailer.flv"</span><span class="p">])</span>
<span class="c1"># =&gt; &lt;video&gt;&lt;source src="/videos/trailer.ogg" /&gt;&lt;source src="/videos/trailer.flv" /&gt;&lt;/video&gt;</span>

<span class="n">video_tag</span><span class="p">(</span><span class="s2">"trailer"</span><span class="p">,</span> <span class="ss">controls: </span><span class="kp">true</span><span class="p">)</span>
<span class="c1"># =&gt; &lt;video controls="controls" src="/videos/trailer"&gt;&lt;/video&gt;</span>
</code></pre>
</div>
<div class="info"><p>Внутренне, <code>video_tag</code> использует <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/AssetUrlHelper.html#method-i-video_path"><code>video_path</code> из AssetUrlHelpers</a> для построения пути к видео.</p></div><p>Подробности смотрите в <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-video_tag">API-документации</a>.</p><h3 id='javascript' class='inside_page_header'><a href="#javascript">6.</a> JavaScript</h3><p>Набор методов для работы с JavaScript в ваших вью.</p><h4 id='escape_javascript' class='inside_page_header'><a href="#escape_javascript">6.1.</a> escape_javascript</h4><p>Экранирует символы переноса строки, а также одинарные и двойные кавычки для сегментов JavaScript. Нужно использовать этот метод, чтобы взять строку текста и убедиться, что она не будет содержать неправильных символов, которые могут привести к ошибкам при ее обработке браузером.</p><p>Например, предположим, у вас есть партиал с приветствием, которое содержит двойные кавычки. Вы можете экранировать приветствие перед его использованием в JavaScript-окне предупреждения.</p><div class="code_container">
  <pre><code class="highlight erb"><span class="c">&lt;%# app/views/users/greeting.html.rb %&gt;</span>
My name is <span class="cp">&lt;%=</span> <span class="n">current_user</span><span class="p">.</span><span class="nf">name</span> <span class="cp">%&gt;</span>, and I'm here to say "Welcome to our website!"
</code></pre>
</div>
<div class="code_container">
  <pre><code class="highlight erb"><span class="nt">&lt;script&gt;</span>
  <span class="kd">var</span> <span class="nx">greeting</span> <span class="o">=</span> <span class="dl">"</span><span class="cp">&lt;%=</span> <span class="n">escape_javascript</span> <span class="n">render</span><span class="p">(</span><span class="s1">'users/greeting'</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="dl">"</span><span class="p">;</span>
  <span class="nx">alert</span><span class="p">(</span><span class="s2">`Hello, </span><span class="p">${</span><span class="nx">greeting</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre>
</div>
<p>Этот метод правильно экранирует кавычки, и приветствие отобразится в окне предупреждения.</p><p>Подробности смотрите в <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/JavaScriptHelper.html#method-i-escape_javascript">API-документации</a>.</p><h4 id='javascript_tag' class='inside_page_header'><a href="#javascript_tag">6.2.</a> javascript_tag</h4><p>Возвращает JavaScript-тег, содержащий предоставленный код. Вы можете передать хэш опций для управления поведением тега <code>&lt;script&gt;</code>.</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">javascript_tag</span><span class="p">(</span><span class="s2">"alert('All is good')"</span><span class="p">,</span> <span class="ss">type: </span><span class="s2">"application/javascript"</span><span class="p">)</span>
</code></pre>
</div>
<div class="code_container">
  <pre><code class="highlight html"><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"application/javascript"</span><span class="nt">&gt;</span>
<span class="c1">//</span><span class="o">&lt;!</span><span class="p">[</span><span class="nx">CDATA</span><span class="p">[</span>
<span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">All is good</span><span class="dl">'</span><span class="p">)</span>
<span class="c1">//]]&gt;</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre>
</div>
<p>Вместо передачи содержимого в качестве аргумента, вы также можете использовать блок.</p><div class="code_container">
  <pre><code class="highlight erb"><span class="cp">&lt;%=</span> <span class="n">javascript_tag</span> <span class="ss">type: </span><span class="s2">"application/javascript"</span> <span class="k">do</span> <span class="cp">%&gt;</span>
  alert("Welcome to my app!")
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre>
</div>
<p>Подробности смотрите в <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/JavaScriptHelper.html#method-i-javascript_tag">API-документации</a>.</p><h3 id='alternativnye-tegi' class='inside_page_header'><a href="#alternativnye-tegi">7.</a> Альтернативные теги</h3><p>Набор методов для программной генерации HTML-тегов.</p><h4 id='tag' class='inside_page_header'><a href="#tag">7.1.</a> tag</h4><p>Генерирует одиночный HTML-тег с указанным <code>name</code> и <code>options</code>.</p><p>Каждый тег может быть построен с помощью:</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">tag</span><span class="p">.</span><span class="nf">some_tag_name</span><span class="p">(</span><span class="n">optional</span> <span class="n">content</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre>
</div>
<p>Где имя тега может быть, например, <code>br</code>, <code>div</code>, <code>section</code>, <code>article</code> или вообще любой тег.</p><p>Например, вот несколько распространенных вариантов использования:</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">tag</span><span class="p">.</span><span class="nf">h1</span> <span class="s2">"All titles fit to print"</span>
<span class="c1"># =&gt; &lt;h1&gt;All titles fit to print&lt;/h1&gt;</span>

<span class="n">tag</span><span class="p">.</span><span class="nf">div</span> <span class="s2">"Hello, world!"</span>
<span class="c1"># =&gt; &lt;div&gt;Hello, world!&lt;/div&gt;</span>
</code></pre>
</div>
<p>Кроме того, вы можете передать опции для добавления атрибутов к создаваемому тегу.</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">tag</span><span class="p">.</span><span class="nf">section</span> <span class="ss">class: </span><span class="sx">%w( kitties puppies )</span>
<span class="c1"># =&gt; &lt;section class="kitties puppies"&gt;&lt;/section&gt;</span>
</code></pre>
</div>
<p>Дополнительно, HTML-атрибуты <code>data-*</code> могут быть переданы хелперу <code>tag</code> с помощью опции <code>data</code>. Эта опция принимает хэш, содержащий пары ключ-значение для дополнительных атрибутов. Эти пары затем преобразуются в атрибуты <code>data-*</code> с разделителями-дефисами для обеспечения совместимости с JavaScript.</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">tag</span><span class="p">.</span><span class="nf">div</span> <span class="ss">data: </span><span class="p">{</span> <span class="ss">user_id: </span><span class="mi">123</span> <span class="p">}</span>
<span class="c1"># =&gt; &lt;div data-user-id="123"&gt;&lt;/div&gt;</span>
</code></pre>
</div>
<p>Подробности смотрите в <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/TagHelper.html#method-i-tag">API-документации</a>.</p><h4 id='token_list' class='inside_page_header'><a href="#token_list">7.2.</a> token_list</h4><p>Возвращает строку токенов, сформированную на основе предоставленных аргументов. Он также имеет псевдоним <code>class_names</code>.</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">token_list</span><span class="p">(</span><span class="s2">"cats"</span><span class="p">,</span> <span class="s2">"dogs"</span><span class="p">)</span>
<span class="c1"># =&gt; "cats dogs"</span>

<span class="n">token_list</span><span class="p">(</span><span class="kp">nil</span><span class="p">,</span> <span class="kp">false</span><span class="p">,</span> <span class="mi">123</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="s2">"foo"</span><span class="p">,</span> <span class="p">{</span> <span class="ss">bar: </span><span class="kp">true</span> <span class="p">})</span>
<span class="c1"># =&gt; "123 foo bar"</span>

<span class="n">mobile</span><span class="p">,</span> <span class="n">alignment</span> <span class="o">=</span> <span class="kp">true</span><span class="p">,</span> <span class="s2">"center"</span>
<span class="n">token_list</span><span class="p">(</span><span class="s2">"flex items-</span><span class="si">#{</span><span class="n">alignment</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="s2">"flex-col"</span><span class="p">:</span> <span class="n">mobile</span><span class="p">)</span>
<span class="c1"># =&gt; "flex items-center flex-col"</span>
<span class="n">class_names</span><span class="p">(</span><span class="s2">"flex items-</span><span class="si">#{</span><span class="n">alignment</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="s2">"flex-col"</span><span class="p">:</span> <span class="n">mobile</span><span class="p">)</span> <span class="c1"># using the alias</span>
<span class="c1"># =&gt; "flex items-center flex-col"</span>
</code></pre>
</div>
<h3 id='bloki-zahvata' class='inside_page_header'><a href="#bloki-zahvata">8.</a> Блоки захвата</h3><p>Набор методов для извлечения сгенерированной разметки, которую можно использовать в других частях файла шаблона или макета.</p><p>Этот набор методов предоставляет метод <code>capture</code> для захвата блоков в переменную и способ захвата блок для использования в макете с помощью <code>content_for</code>.</p><h4 id='capture' class='inside_page_header'><a href="#capture">8.1.</a> capture</h4><p>Метод <code>capture</code> позволяет извлечь часть шаблона в переменную.</p><div class="code_container">
  <pre><code class="highlight erb"><span class="cp">&lt;%</span> <span class="vi">@greeting</span> <span class="o">=</span> <span class="n">capture</span> <span class="k">do</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;p&gt;</span>Welcome! The date and time is <span class="cp">&lt;%=</span> <span class="no">Time</span><span class="p">.</span><span class="nf">current</span> <span class="cp">%&gt;</span><span class="nt">&lt;/p&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre>
</div>
<p>Затем вы можете использовать эту переменную в любом месте ваших шаблонов, макетов или хелперов.</p><div class="code_container">
  <pre><code class="highlight erb"><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>Welcome!<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="cp">&lt;%=</span> <span class="vi">@greeting</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre>
</div>
<p>Возвращаемое значение <code>capture</code> - это строка, сгенерированная переданным блоком.</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="vi">@greeting</span>
<span class="c1"># =&gt; "Welcome to my shiny new web page! The date and time is 2018-09-06 11:09:16 -0500"</span>
</code></pre>
</div>
<p>Подробности смотрите в <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/CaptureHelper.html#method-i-capture">API-документации</a>.</p><h4 id='content_for' class='inside_page_header'><a href="#content_for">8.2.</a> content_for</h4><p>Вызов <code>content_for</code> сохраняет блок разметки под определенным идентификатором для дальнейшего использования. Вы можете обращаться к этому сохраненному содержимому позже в других шаблонах, вспомогательных модулях или макете, передавая идентификатор в качестве аргумента методу <code>yield</code>.</p><p>Один из распространенных вариантов использования <code>content_for</code> - это установка заголовка страницы.</p><p>Вы определяете блок <code>content_for</code> с заголовком в специальном шаблоне страницы, и затем используете <code>yield</code> в макете. На других страницах, где блок <code>content_for</code> не используется, он останется пустым, и <code>yield</code> ничего не вставит.</p><div class="code_container">
  <pre><code class="highlight erb"><span class="c">&lt;%# app/views/users/special_page.html.erb %&gt;</span>
<span class="cp">&lt;%</span> <span class="n">content_for</span><span class="p">(</span><span class="ss">:html_title</span><span class="p">)</span> <span class="p">{</span> <span class="s2">"Special Page Title"</span> <span class="p">}</span> <span class="cp">%&gt;</span>
</code></pre>
</div>
<div class="code_container">
  <pre><code class="highlight erb"><span class="c">&lt;%# app/views/layouts/application.html.erb %&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span><span class="cp">&lt;%=</span> <span class="n">content_for?</span><span class="p">(</span><span class="ss">:html_title</span><span class="p">)</span> <span class="p">?</span> <span class="k">yield</span><span class="p">(</span><span class="ss">:html_title</span><span class="p">)</span> <span class="p">:</span> <span class="s2">"Default Title"</span> <span class="cp">%&gt;</span><span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre>
</div>
<p>Обратите внимание, что в приведенном выше примере мы используем метод-предикат <code>content_for?</code> для условного вывода заголовка. Этот метод проверяет, был ли какой-либо контент ранее захвачен с помощью <code>content_for</code>, что позволяет вам адаптировать части вашего макета в зависимости от контента в ваших вью.</p><p>Дополнительно, вы можете использовать <code>content_for</code> внутри вспомогательного модуля.</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="c1"># app/helpers/title_helper.rb</span>
<span class="k">module</span> <span class="nn">TitleHelper</span>
  <span class="k">def</span> <span class="nf">html_title</span>
    <span class="n">content_for</span><span class="p">(</span><span class="ss">:html_title</span><span class="p">)</span> <span class="o">||</span> <span class="s2">"Default Title"</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
</div>
<p>Теперь вы можете вызвать <code>html_title</code> в вашем макете, чтобы получить содержимое, сохраненное в блоке <code>content_for</code>. Если на странице, которая отрисовывается (например, на <code>special_page</code>), установлен блок <code>content_for</code>, он отобразит заголовок. В противном случае будет отображен текст по умолчанию &quot;Default Title&quot;.</p><div class="warning"><p><code>content_for</code> игнорируется в кэше. Поэтому не следует использовать его для элементов, которые будут кэшироваться фрагментами.</p></div><div class="note"><p>Возможно, вы задумываетесь, в чем разница между <code>capture</code> и <code>content_for</code>? <br><br>
<code>capture</code> используется для захвата блока разметки в переменную, а <code>content_for</code> используется для хранения блока разметки под идентификатором для дальнейшего использования. Внутренне <code>content_for</code> фактически вызывает <code>capture</code>. Однако ключевое отличие заключается в их поведении при многократном вызове.<br><br>
<code>content_for</code> можно вызывать несколько раз, объединяя блоки, которые он получает для определенного идентификатора, в том порядке, в котором они предоставляются. Каждый последующий вызов просто добавляется к тому, что уже сохранено. Напротив, <code>capture</code> возвращает только содержимое блока, не отслеживая предыдущих вызовов.</p></div><p>Подробности смотрите в <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/CaptureHelper.html#method-i-content_for">API-документации</a>.</p><h3 id='proizvoditelnost' class='inside_page_header'><a href="#proizvoditelnost">9.</a> Производительность</h3><h4 id='benchmark' class='inside_page_header'><a href="#benchmark">9.1.</a> benchmark</h4><p>Оборачивайте дорогостоящие операции или потенциальные узкие места блоком <code>benchmark</code>, чтобы получить время выполнения операции.</p><div class="code_container">
  <pre><code class="highlight erb"><span class="cp">&lt;%</span> <span class="n">benchmark</span> <span class="s2">"Process data files"</span> <span class="k">do</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">expensive_files_operation</span> <span class="cp">%&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre>
</div>
<p>Это добавит в лог информацию вроде <code>Process data files (0.34523)</code>, которую затем можно использовать для сравнения временных затрат при оптимизации вашего кода.</p><div class="note"><p>Этот хелпер является частью Active Support и также доступен в контроллерах, хелперах, моделях и т.д.</p></div><p>Подробности смотрите в <a href="https://api.rubyonrails.org/classes/ActiveSupport/Benchmarkable.html#method-i-benchmark">API-документации</a>.</p><h4 id='cache' class='inside_page_header'><a href="#cache">9.2.</a> cache</h4><p>Вы можете кэшировать фрагменты вью, а не целые действия или страницы. Эта техника полезна для кэширования таких элементов, как меню, списки новостей, статические фрагменты HTML и т.д. Он позволяет обернуть фрагмент логики вью в блок кэша и извлекать его из хранилища кэша при следующем запросе.</p><p>Метод <code>cache</code> принимает блок, содержащий контент, который вы хотите кэшировать.</p><p>Например, вы можете кэшировать footer вашего макета приложения, обернув его блоком <code>cache</code>.</p><div class="code_container">
  <pre><code class="highlight erb"><span class="cp">&lt;%</span> <span class="n">cache</span> <span class="k">do</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s2">"application/footer"</span> <span class="cp">%&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre>
</div>
<p>Вы также можете кэшировать данные на основе экземпляров модели. Например, можно кэшировать каждую статью на странице, передав объект <code>article</code> в метод <code>cache</code>. Это позволит кэшировать каждую статью отдельно.</p><div class="code_container">
  <pre><code class="highlight erb"><span class="cp">&lt;%</span> <span class="vi">@articles</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">article</span><span class="o">|</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%</span> <span class="n">cache</span> <span class="n">article</span> <span class="k">do</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="n">article</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre>
</div>
<p>Когда ваше приложение получает первый запрос к этой странице, Rails запишет новую запись кэша с уникальным ключом. Ключ выглядит примерно так:</p><div class="code_container">
  <pre><code class="highlight irb"><span class="go">views/articles/index:bea67108094918eeba32cd4a6f786301/articles/1
</span></code></pre>
</div>
<p>Подробности смотрите в <a href="caching_with_rails.html#fragment-caching"><code>Кэширование фрагмента</code></a> и <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/CacheHelper.html#method-i-cache">API-документации</a>.</p><h3 id='raznoe' class='inside_page_header'><a href="#raznoe">10.</a> Разное</h3><h4 id='atom_feed' class='inside_page_header'><a href="#atom_feed">10.1.</a> atom_feed</h4><p>Каналы Atom - это файловые форматы на основе XML, используемые для рассылки контента. Пользователи могут просматривать контент с помощью программ чтения RSS-каналов, а поисковые системы могут использовать их для обнаружения дополнительной информации о вашем сайте.</p><p>Этот хелпер упрощает создание каналов Atom и чаще всего используется в шаблонах Builder для создания XML. Вот полный пример использования:</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="c1"># config/routes.rb</span>
<span class="n">resources</span> <span class="ss">:articles</span>
</code></pre>
</div>
<div class="code_container">
  <pre><code class="highlight ruby"><span class="c1"># app/controllers/articles_controller.rb</span>
<span class="k">def</span> <span class="nf">index</span>
  <span class="vi">@articles</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">all</span>

  <span class="n">respond_to</span> <span class="k">do</span> <span class="o">|</span><span class="nb">format</span><span class="o">|</span>
    <span class="nb">format</span><span class="p">.</span><span class="nf">html</span>
    <span class="nb">format</span><span class="p">.</span><span class="nf">atom</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
</div>
<div class="code_container">
  <pre><code class="highlight ruby"><span class="c1"># app/views/articles/index.atom.builder</span>
<span class="n">atom_feed</span> <span class="k">do</span> <span class="o">|</span><span class="n">feed</span><span class="o">|</span>
  <span class="n">feed</span><span class="p">.</span><span class="nf">title</span><span class="p">(</span><span class="s2">"Articles Index"</span><span class="p">)</span>
  <span class="n">feed</span><span class="p">.</span><span class="nf">updated</span><span class="p">(</span><span class="vi">@articles</span><span class="p">.</span><span class="nf">first</span><span class="p">.</span><span class="nf">created_at</span><span class="p">)</span>

  <span class="vi">@articles</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">article</span><span class="o">|</span>
    <span class="n">feed</span><span class="p">.</span><span class="nf">entry</span><span class="p">(</span><span class="n">article</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">entry</span><span class="o">|</span>
      <span class="n">entry</span><span class="p">.</span><span class="nf">title</span><span class="p">(</span><span class="n">article</span><span class="p">.</span><span class="nf">title</span><span class="p">)</span>
      <span class="n">entry</span><span class="p">.</span><span class="nf">content</span><span class="p">(</span><span class="n">article</span><span class="p">.</span><span class="nf">body</span><span class="p">,</span> <span class="ss">type: </span><span class="s2">"html"</span><span class="p">)</span>

      <span class="n">entry</span><span class="p">.</span><span class="nf">author</span> <span class="k">do</span> <span class="o">|</span><span class="n">author</span><span class="o">|</span>
        <span class="n">author</span><span class="p">.</span><span class="nf">name</span><span class="p">(</span><span class="n">article</span><span class="p">.</span><span class="nf">author_name</span><span class="p">)</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
</div>
<p>Подробности смотрите в <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/AtomFeedHelper.html#method-i-atom_feed">API-документации</a>.</p><h4 id='debug' class='inside_page_header'><a href="#debug">10.2.</a> debug</h4><p>Возвращает представление объекта в формате YAML, обернутое тегом <code>pre</code>. Это удобный способ читабельного просмотра объекта.</p><div class="code_container">
  <pre><code class="highlight ruby"><span class="n">my_hash</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"first"</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">"second"</span> <span class="o">=&gt;</span> <span class="s2">"two"</span><span class="p">,</span> <span class="s2">"third"</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="p">}</span>
<span class="n">debug</span><span class="p">(</span><span class="n">my_hash</span><span class="p">)</span>
</code></pre>
</div>
<div class="code_container">
  <pre><code class="highlight html"><span class="nt">&lt;pre</span> <span class="na">class=</span><span class="s">"debug_dump"</span><span class="nt">&gt;</span>---
first: 1
second: two
third:
- 1
- 2
- 3
<span class="nt">&lt;/pre&gt;</span>
</code></pre>
</div>
<p>Подробности смотрите в <a href="https://api.rubyonrails.org/classes/ActionView/Helpers/DebugHelper.html#method-i-debug">API-документации</a>.</p>

            <div class="banner">
              <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

   <!-- bottom rusrails -->
   <ins class="adsbygoogle"
        style="display:inline-block;width:580px;height:400px"
        data-ad-client="ca-pub-7764391801669990"
        data-ad-slot="7566253867"></ins>


<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

            </div>
          </div>
        </div>
        <div class="row-fluid">
          <div class="span12" id="footer">
            <p>
              <a target="blank" href="https://github.com/rusrails/rusrails"><img src="/assets/github-7cc23602a5ac2465f14c19492358a5a67dc24636761cc723e4d621cea0c09225.png" /></a>
              <a target="blank" href="http://twitter.com/rusrails"><img src="/assets/twitter-50e0e767c8793dec313a7dc5cfbcfe2067e3e89ea6ec64784eb7c6640f578758.png" /></a>
            </p>
            <p>
              <a href="https://creativecommons.org/licenses/by-sa/4.0/">Лицензия CC BY-SA 4.0</a>
              "Rails", "Ruby on Rails" и логотип Rails - торговые марки DHH
              <!-- Yandex.Metrika counter -->
<script>
  (function (d, w, c) {
    (w[c] = w[c] || []).push(function() {
        try {
            w.yaCounter1006929 = new Ya.Metrika({id:1006929,
                    webvisor:true,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true});
        } catch(e) { }
    });

    var n = d.getElementsByTagName("script")[0],
        s = d.createElement("script"),
        f = function () { n.parentNode.insertBefore(s, n); };
    s.type = "text/javascript";
    s.async = true;
    s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";

    if (w.opera == "[object Opera]") {
        d.addEventListener("DOMContentLoaded", f, false);
    } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>

<noscript>
  <div>
    <img style="position:absolute; left:-9999px;" alt="" src="//mc.yandex.ru/watch/1006929" />
  </div>
</noscript>
<!-- /Yandex.Metrika counter -->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-64955373-1', 'auto');
  ga('send', 'pageview');

  var trackOutboundLink = function(url) {
    ga('send', 'event', 'outbound', 'click', url, {
      'transport': 'beacon',
      'hitCallback': function(){ }
    });
  }
</script>

            </p>
          </div>
        </div>
      </div>
    </div>
    <div class="to_top" style="display: block">
      <div class="to_top_panel"></div>
    </div>
    <script src="/assets/application-8ee447905888b153d8458707061a14b1f15f69b6733e871a3ad91d80ae89e87b.js"></script>
  </body>
</html>
